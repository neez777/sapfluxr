<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPV Method Comparison</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .method-name {
            font-weight: 600;
            color: #2980b9;
        }
        .good {
            color: #27ae60;
            font-weight: 500;
        }
        .poor {
            color: #e74c3c;
            font-weight: 500;
        }
        .moderate {
            color: #f39c12;
            font-weight: 500;
        }
        .range {
            font-family: monospace;
            background: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
        }
        .legend {
            margin: 20px 0;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 5px;
        }
        .legend-item {
            display: inline-block;
            margin-right: 20px;
        }
        .flow-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 2px;
        }
        .low-flow {
            background: #3498db;
            color: white;
        }
        .mid-flow {
            background: #f39c12;
            color: white;
        }
        .high-flow {
            background: #e74c3c;
            color: white;
        }
        .reverse-flow {
            background: #9b59b6;
            color: white;
        }
        .all-flow {
            background: #27ae60;
            color: white;
        }
        .section-header {
            background: #2c3e50;
            color: white;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Heat Pulse Velocity Methods: Comprehensive Comparison</h1>

    <div class="container">
        <div class="legend">
            <strong>Flow Range Indicators:</strong><br>
            <span class="flow-indicator low-flow">Low Flow (0-20 cm/h)</span>
            <span class="flow-indicator mid-flow">Mid Flow (20-50 cm/h)</span>
            <span class="flow-indicator high-flow">High Flow (>50 cm/h)</span>
            <span class="flow-indicator reverse-flow">Reverse Flow (<0 cm/h)</span>
            <span class="flow-indicator all-flow">All Ranges</span>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Measurable Range</th>
                    <th>Best For</th>
                    <th>Strengths</th>
                    <th>Weaknesses</th>
                    <th>Key Parameters</th>
                    <th>Calculation Basis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="method-name">HRM<br><small>(Heat Ratio Method)</small></td>
                    <td>
                        <span class="range">-20 to 55 cm/h</span><br>
                        <span class="flow-indicator low-flow">Low Flow</span>
                        <span class="flow-indicator reverse-flow">Reverse</span>
                    </td>
                    <td>
                        â€¢ Low sap flows<br>
                        â€¢ Reverse flows<br>
                        â€¢ Night measurements<br>
                        â€¢ Slow-growing species
                    </td>
                    <td class="good">
                        âœ“ Handles reverse flows<br>
                        âœ“ Works at zero flow<br>
                        âœ“ Well-established method<br>
                        âœ“ Stable at low flows<br>
                        âœ“ Extensive literature
                    </td>
                    <td class="poor">
                        âœ— Fails at high flows (>55 cm/h)<br>
                        âœ— Fixed time window may not be optimal<br>
                        âœ— Sensitive to timing<br>
                        âœ— Requires accurate k measurement
                    </td>
                    <td>
                        â€¢ D: 0.0025 cmÂ²/s<br>
                        â€¢ x: 0.5 cm<br>
                        â€¢ Window: 60-100s<br>
                        â€¢ Needs 4 probes
                    </td>
                    <td>
                        Averages Î”T ratios in<br>
                        fixed cooling window<br>
                        (60-100s post-pulse)
                    </td>
                </tr>

                <tr>
                    <td class="method-name">MHR<br><small>(Maximum Heat Ratio)</small></td>
                    <td>
                        <span class="range">-30 to 140 cmÂ³/cmÂ²/h</span><br>
                        <span class="flow-indicator mid-flow">Mid Flow</span>
                        <span class="flow-indicator high-flow">High Flow</span>
                    </td>
                    <td>
                        â€¢ High sap flows<br>
                        â€¢ Fast-growing species<br>
                        â€¢ Rapidly changing flows<br>
                        â€¢ Young trees with high LAI
                    </td>
                    <td class="good">
                        âœ“ Extended high flow range<br>
                        âœ“ Avoids HRM high-flow failures<br>
                        âœ“ Simple calculation<br>
                        âœ“ Robust to transients<br>
                        âœ“ No arbitrary time window
                    </td>
                    <td class="poor">
                        âœ— Less accurate at very low flows<br>
                        âœ— Susceptible to noise at low flows<br>
                        âœ— Single point measurement<br>
                        âœ— Relatively new method
                    </td>
                    <td>
                        â€¢ D: 0.0025 cmÂ²/s<br>
                        â€¢ x: 0.5 cm<br>
                        â€¢ Uses Î”Tmax only<br>
                        â€¢ Typically 0-50s range
                    </td>
                    <td>
                        Uses maximum Î”T from<br>
                        each probe (typically<br>
                        within 0-50s)
                    </td>
                </tr>

                <tr>
                    <td class="method-name">HRMXa<br><small>(Modified HRM - Ratio Averaging)</small></td>
                    <td>
                        <span class="range">0 to ~80 cm/h</span><br>
                        <span class="flow-indicator low-flow">Low Flow</span>
                        <span class="flow-indicator mid-flow">Mid Flow</span>
                    </td>
                    <td>
                        â€¢ Variable flow conditions<br>
                        â€¢ When HRM window inappropriate<br>
                        â€¢ Intermediate flows
                    </td>
                    <td class="good">
                        âœ“ Adaptive time window<br>
                        âœ“ Uses only rising phase<br>
                        âœ“ Better than HRM at mid flows<br>
                        âœ“ Flexible window definition
                    </td>
                    <td class="poor">
                        âœ— More complex calculation<br>
                        âœ— Requires L and H parameters<br>
                        âœ— Limited published validation<br>
                        âœ— Choice of L/H values subjective
                    </td>
                    <td>
                        â€¢ D: 0.0025 cmÂ²/s<br>
                        â€¢ x: 0.5 cm<br>
                        â€¢ L: 0.5 (50% Î”Tmax)<br>
                        â€¢ H: 0.8 (80% Î”Tmax)
                    </td>
                    <td>
                        Averages ratios within<br>
                        adaptive window<br>
                        (50-80% of Î”Tmax)
                    </td>
                </tr>

                <tr>
                    <td class="method-name">HRMXb<br><small>(Modified HRM - Mean Ratio)</small></td>
                    <td>
                        <span class="range">0 to ~80 cm/h</span><br>
                        <span class="flow-indicator low-flow">Low Flow</span>
                        <span class="flow-indicator mid-flow">Mid Flow</span>
                    </td>
                    <td>
                        â€¢ Similar to HRMXa<br>
                        â€¢ Alternative calculation approach
                    </td>
                    <td class="good">
                        âœ“ Same as HRMXa<br>
                        âœ“ Ratio of means approach<br>
                        âœ“ May be more stable
                    </td>
                    <td class="poor">
                        âœ— Same as HRMXa<br>
                        âœ— Different results than HRMXa<br>
                        âœ— Not clear which is superior
                    </td>
                    <td>
                        â€¢ Same as HRMXa<br>
                        â€¢ L: 0.5<br>
                        â€¢ H: 0.8
                    </td>
                    <td>
                        Takes ratio of averaged<br>
                        Î”T values (not averaging<br>
                        ratios like HRMXa)
                    </td>
                </tr>

                <tr>
                    <td class="method-name">Tmax_Coh<br><small>(Cohen Tmax Method)</small></td>
                    <td>
                        <span class="range">20 to 100+ cm/h</span><br>
                        <span class="flow-indicator mid-flow">Mid Flow</span>
                        <span class="flow-indicator high-flow">High Flow</span>
                    </td>
                    <td>
                        â€¢ High flows<br>
                        â€¢ When convection dominates<br>
                        â€¢ Simple measurements
                    </td>
                    <td class="good">
                        âœ“ Simple calculation<br>
                        âœ“ Single probe sufficient<br>
                        âœ“ Good for high flows<br>
                        âœ“ Thermal equilibrium not needed
                    </td>
                    <td class="poor">
                        âœ— Cannot measure low/zero flows<br>
                        âœ— Cannot measure reverse flows<br>
                        âœ— Sensitive to noise<br>
                        âœ— Single time point<br>
                        âœ— Ignores finite pulse duration
                    </td>
                    <td>
                        â€¢ D: 0.0025 cmÂ²/s<br>
                        â€¢ x: 0.5 cm<br>
                        â€¢ tm: time to max<br>
                        â€¢ Only downstream needed
                    </td>
                    <td>
                        Based on time to reach<br>
                        maximum temperature<br>
                        at downstream probe
                    </td>
                </tr>

                <tr>
                    <td class="method-name">Tmax_Klu<br><small>(Kluitenberg Tmax)</small></td>
                    <td>
                        <span class="range">20 to 100+ cm/h</span><br>
                        <span class="flow-indicator mid-flow">Mid Flow</span>
                        <span class="flow-indicator high-flow">High Flow</span>
                    </td>
                    <td>
                        â€¢ High flows<br>
                        â€¢ Preferred over Tmax_Coh<br>
                        â€¢ DMA implementation
                    </td>
                    <td class="good">
                        âœ“ All Tmax_Coh strengths<br>
                        âœ“ Accounts for pulse duration<br>
                        âœ“ More accurate than Cohen<br>
                        âœ“ Preferred in DMA
                    </td>
                    <td class="poor">
                        âœ— Same as Tmax_Coh<br>
                        âœ— Requires accurate tp<br>
                        âœ— More complex equation
                    </td>
                    <td>
                        â€¢ D: 0.0025 cmÂ²/s<br>
                        â€¢ x: 0.5 cm<br>
                        â€¢ tm: time to max<br>
                        â€¢ tp: 2s (pulse duration)
                    </td>
                    <td>
                        Like Tmax_Coh but<br>
                        corrects for finite<br>
                        heat pulse duration
                    </td>
                </tr>

                <tr>
                    <td class="method-name">DMA<br><small>(Dual Method Approach)</small></td>
                    <td>
                        <span class="range">-20 to 100+ cm/h</span><br>
                        <span class="flow-indicator all-flow">All Ranges</span>
                    </td>
                    <td>
                        â€¢ Full flow range<br>
                        â€¢ Variable conditions<br>
                        â€¢ General purpose<br>
                        â€¢ Recommended default
                    </td>
                    <td class="good">
                        âœ“ Full range coverage<br>
                        âœ“ Automatic method selection<br>
                        âœ“ Physics-based threshold<br>
                        âœ“ Combines HRM + Tmax strengths<br>
                        âœ“ No user intervention needed
                    </td>
                    <td class="poor">
                        âœ— Potential discontinuity at switch<br>
                        âœ— Requires both methods to work<br>
                        âœ— More complex implementation<br>
                        âœ— Need to validate threshold
                    </td>
                    <td>
                        â€¢ Uses HRM parameters<br>
                        â€¢ Uses Tmax_Klu params<br>
                        â€¢ Switch: Vh_crit = D/x Ã— 3600<br>
                        â€¢ Typically ~18 cm/h
                    </td>
                    <td>
                        Calculates both HRM and<br>
                        Tmax_Klu, switches based<br>
                        on PÃ©clet number (Î²â‰¤1)
                    </td>
                </tr>
            </tbody>
        </table>

        <h2 style="margin-top: 40px; color: #2c3e50;">Decision Matrix: Which Method to Use?</h2>

        <table style="margin-top: 20px;">
            <thead>
                <tr>
                    <th>Flow Condition</th>
                    <th>Recommended Method</th>
                    <th>Alternative</th>
                    <th>Rationale</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Reverse Flow</strong> (-20 to 0 cm/h)</td>
                    <td class="good">HRM or DMA</td>
                    <td>-</td>
                    <td>Only HRM-based methods can measure negative flows</td>
                </tr>
                <tr>
                    <td><strong>Zero/Near-Zero</strong> (0-5 cm/h)</td>
                    <td class="good">HRM or DMA</td>
                    <td>HRMXa/b</td>
                    <td>HRM most stable at very low flows, Tmax unreliable</td>
                </tr>
                <tr>
                    <td><strong>Low Flow</strong> (5-20 cm/h)</td>
                    <td class="good">HRM or DMA</td>
                    <td>HRMXa/b, MHR</td>
                    <td>HRM sweet spot, all methods work reasonably</td>
                </tr>
                <tr>
                    <td><strong>Moderate Flow</strong> (20-50 cm/h)</td>
                    <td class="good">DMA or MHR</td>
                    <td>HRMXa/b, Tmax_Klu</td>
                    <td>Transition zone, DMA auto-selects appropriate method</td>
                </tr>
                <tr>
                    <td><strong>High Flow</strong> (50-100 cm/h)</td>
                    <td class="good">MHR or DMA</td>
                    <td>Tmax_Klu</td>
                    <td>HRM fails, MHR most reliable, DMA uses Tmax</td>
                </tr>
                <tr>
                    <td><strong>Very High Flow</strong> (>100 cm/h)</td>
                    <td class="good">MHR</td>
                    <td>Tmax_Klu</td>
                    <td>Only MHR validated to ~140 cmÂ³/cmÂ²/h</td>
                </tr>
                <tr>
                    <td><strong>Variable/Unknown</strong></td>
                    <td class="good">DMA</td>
                    <td>Calculate all, compare</td>
                    <td>DMA automatically handles range, safest choice</td>
                </tr>
                <tr>
                    <td><strong>Rapidly Changing</strong></td>
                    <td class="good">MHR or DMA</td>
                    <td>-</td>
                    <td>MHR more robust to transients than fixed HRM window</td>
                </tr>
            </tbody>
        </table>

        <h2 style="margin-top: 40px; color: #2c3e50;">Typical Workflow Recommendations</h2>

        <table style="margin-top: 20px;">
            <thead>
                <tr>
                    <th>Use Case</th>
                    <th>Primary Method</th>
                    <th>Quality Check Methods</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Research Study</strong><br>(need best accuracy)</td>
                    <td>DMA + MHR + HRM</td>
                    <td>Calculate all methods<br>Compare for validation</td>
                    <td>Use DMA for reporting, others for quality control and method comparison</td>
                </tr>
                <tr>
                    <td><strong>Operational Monitoring</strong><br>(need reliability)</td>
                    <td>DMA</td>
                    <td>Check HRM vs Tmax_Klu<br>at switch point</td>
                    <td>DMA provides best coverage with automatic selection</td>
                </tr>
                <tr>
                    <td><strong>Low-Flow Species</strong><br>(e.g., conifers, arid)</td>
                    <td>HRM</td>
                    <td>Occasionally check DMA</td>
                    <td>HRM sufficient if confident flows stay <50 cm/h</td>
                </tr>
                <tr>
                    <td><strong>High-Flow Species</strong><br>(e.g., Eucalyptus, young trees)</td>
                    <td>MHR</td>
                    <td>Calculate DMA for validation</td>
                    <td>MHR extends range beyond other methods</td>
                </tr>
                <tr>
                    <td><strong>Method Development</strong><br>(testing new approaches)</td>
                    <td>All methods</td>
                    <td>Compare with gravimetric<br>or other validation</td>
                    <td>Calculate all methods to understand differences and validate new approaches</td>
                </tr>
            </tbody>
        </table>

        <div style="margin-top: 30px; padding: 20px; background: #e8f4f8; border-radius: 5px; border-left: 4px solid #2980b9;">
            <h3 style="margin-top: 0; color: #2980b9;">ðŸ’¡ General Recommendation</h3>
            <p><strong>For most applications, calculate DMA as your primary method</strong>, but also compute HRM and MHR for quality control. This approach:</p>
            <ul>
                <li>Provides full range coverage without manual intervention</li>
                <li>Allows you to check method agreement in overlapping ranges</li>
                <li>Helps identify data quality issues when methods disagree significantly</li>
                <li>Maintains compatibility with published literature using HRM or MHR</li>
            </ul>
        </div>
    </div>
</body>
</html>
