% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/13_tree_water_use.R
\name{calc_tree_sap_flux}
\alias{calc_tree_sap_flux}
\title{Calculate Tree-Level Sap Flux from Flux Density}
\usage{
calc_tree_sap_flux(
  flux_results,
  sapwood_area_data,
  scaling_method = "outer_only",
  flux_units = "L_hr",
  water_density = 1
)
}
\arguments{
\item{flux_results}{Data frame with flux density results from calc_sap_flux_density()
Must contain: Jv_cm3_cm2_hr, sensor_position columns}

\item{sapwood_area_data}{Sapwood area calculations from calc_sapwood_area()}

\item{scaling_method}{Method for scaling flux density to tree level:
\describe{
\item{"outer_only"}{Uses only outer sensor measurements (default)}
\item{"inner_only"}{Uses only inner sensor measurements}
\item{"weighted_average"}{Weighted average based on area coverage}
\item{"radial_profile"}{Assumes linear radial profile between sensors}
}}

\item{flux_units}{Output units for tree flux. Options: "L_hr", "L_day", "kg_hr", "kg_day"
(default: "L_hr")}

\item{water_density}{Water density for mass calculations (kg/L). Only used for kg units
(default: 1.0)}
}
\value{
Data frame with tree-level flux calculations containing original columns plus:
\describe{
\item{tree_flux}{Tree-level flux in specified units}
\item{flux_units}{Units of tree flux}
\item{total_sapwood_area_cm2}{Total sapwood area used in scaling}
\item{scaling_method}{Scaling method used}
\item{sensor_coverage}{Fraction of sapwood area covered by sensors}
\item{extrapolation_factor}{Factor used to extrapolate from measured to total area}
}
}
\description{
Scale sap flux density measurements to whole-tree sap flux using sapwood area
and sensor coverage calculations.
}
\details{
Scaling methods:
\itemize{
\item \strong{outer_only}: Applies outer sensor flux density to entire sapwood area
\item \strong{inner_only}: Applies inner sensor flux density to entire sapwood area
\item \strong{weighted_average}: Uses area-weighted average of both sensors
\item \strong{radial_profile}: Assumes linear decline from outer to inner sensor
}

The choice of scaling method depends on expected radial patterns:
\itemize{
\item Use "outer_only" for species with flow concentrated near cambium
\item Use "weighted_average" for relatively uniform radial flow
\item Use "radial_profile" when expecting gradual radial decline
}
}
\examples{
\dontrun{
# Calculate sapwood area
sapwood_area <- calc_sapwood_area(diameter_breast_height = 18.2)

# Scale flux density to tree level
tree_flux <- calc_tree_sap_flux(
  flux_results,
  sapwood_area,
  scaling_method = "weighted_average",
  flux_units = "L_day"
)

# Compare scaling methods
methods <- c("outer_only", "weighted_average", "radial_profile")
comparison <- lapply(methods, function(method) {
  calc_tree_sap_flux(flux_results, sapwood_area, scaling_method = method)
})
}

}
\seealso{
\code{\link{calc_sapwood_area}}, \code{\link{calc_sap_flux_density}}
}
