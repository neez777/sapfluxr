% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04b_sdma_enhanced.R
\name{auto_select_sdma_strategy}
\alias{auto_select_sdma_strategy}
\title{Automatically Select Optimal sDMA Strategy}
\usage{
auto_select_sdma_strategy(
  data,
  secondary,
  sensor_position = "outer",
  velocity_col = "Vh_cm_hr",
  peclet_col = "hrm_peclet_number",
  discontinuity_threshold = 0.1,
  verbose = TRUE
)
}
\arguments{
\item{data}{Data frame containing HRM and at least one secondary method.}

\item{secondary}{Character. Secondary method to consider (e.g., "MHR").}

\item{sensor_position}{Character. Which sensor ("outer" or "inner"). Default: "outer".}

\item{velocity_col}{Character. Velocity column name (default: "Vh_cm_hr").}

\item{peclet_col}{Character. Peclet column name (default: "hrm_peclet_number").}

\item{discontinuity_threshold}{Numeric. Maximum acceptable difference (as fraction)
between methods at boundary (default: 0.10 = 10\%). If difference exceeds this,
calibration will be enabled.}

\item{verbose}{Logical. Print decision-making process (default: TRUE).}
}
\value{
Either:
\itemize{
\item The original data (if switching not needed)
\item Data with sDMA columns added (if switching applied)
}
Result includes an attribute "sdma_applied" (TRUE/FALSE) and "sdma_reason"
explaining the decision.
}
\description{
Intelligent wrapper that determines whether method switching is necessary,
whether calibration is needed, and automatically configures the sDMA approach.
This is the "smart" function that makes decisions for the user.
}
\details{
\strong{Decision Tree:}

\enumerate{
\item \strong{Check Necessity}: Is max(Peclet) > 1.0?
- If NO: Return original data with message "No switching needed (low flow)"
- If YES: Continue to step 2
\item \strong{Check Discontinuity}: Do methods differ significantly at Pe = 1?
- Compare HRM and secondary values near the boundary (Pe = 0.9 to 1.1)
- If difference > threshold (default 10\%): Enable calibration
- If difference <= threshold: No calibration needed
\item \strong{Execute}: Call apply_sdma_switching() with determined settings
}

\strong{Why This Matters:}

\itemize{
\item Avoids unnecessary computation when all flows are low (Pe < 1)
\item Prevents "volcano effect" by detecting discontinuities automatically
\item Provides thesis-defensible decision logic with clear reasoning
}
}
\examples{
\dontrun{
# Let the function decide everything
result <- auto_select_sdma_strategy(
  data = vh_results,
  secondary = "MHR"
)

# Check what was decided
attr(result, "sdma_applied")  # TRUE or FALSE
attr(result, "sdma_reason")   # Explanation of decision
}

}
\seealso{
Other sDMA functions: 
\code{\link{apply_sdma_switching}()},
\code{\link{calibrate_secondary_method}()},
\code{\link{recalculate_peclet}()}
}
\concept{sDMA functions}
