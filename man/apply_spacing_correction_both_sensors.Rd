% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/03d_spacing_correction_enhanced.R
\name{apply_spacing_correction_both_sensors}
\alias{apply_spacing_correction_both_sensors}
\title{Apply Spacing Correction to Both Sensors}
\usage{
apply_spacing_correction_both_sensors(
  vh_data,
  changepoints,
  method = "HRM",
  baseline_overrides_outer = NULL,
  baseline_overrides_inner = NULL,
  k_assumed = 0.0025,
  probe_spacing = 0.5,
  measurement_time = 80,
  verbose = TRUE
)
}
\arguments{
\item{vh_data}{Data frame containing velocity data for both sensors}

\item{changepoints}{Vector of changepoint dates (detected from outer sensor)}

\item{method}{Method to correct (default: "HRM"). Burgess correction only validated for HRM.}

\item{baseline_overrides_outer}{Optional named list of manual baselines for OUTER sensor per segment}

\item{baseline_overrides_inner}{Optional named list of manual baselines for INNER sensor per segment}

\item{k_assumed}{Assumed thermal diffusivity (cmÂ²/s) (default: 0.0025)}

\item{probe_spacing}{Probe spacing (cm) (default: 0.5)}

\item{measurement_time}{Measurement time (sec) (default: 80)}

\item{verbose}{Logical, whether to print progress (default: TRUE)}
}
\value{
A list containing:
\item{vh_corrected}{Combined data frame with corrections applied to both sensors}
\item{outer_results}{Correction results for outer sensor}
\item{inner_results}{Correction results for inner sensor}
\item{changepoints}{Changepoints used (from outer sensor)}
\item{metadata}{Metadata about the correction process}
}
\description{
Wrapper function that applies spacing correction to both inner and outer sensors
using the same changepoints (detected from outer sensor). Each sensor position
calculates its own baseline within each segment, but uses the same segment boundaries.
}
\details{
\strong{Workflow:}
\enumerate{
\item Detect changepoints from outer sensor data (more reliable)
\item Apply same changepoints to both inner and outer sensors
\item For each segment, calculate separate baselines for inner and outer
\item Apply Burgess correction per segment per sensor
\item Combine results
}

\strong{Manual Baseline Override:}

You can manually specify baselines for specific segments and sensors:

\preformatted{
# Segment 1: outer = 0.8, inner = 1.2 (manual)
# Segment 2: auto-detect for both
# Segment 3: outer = 0.6, inner auto-detect

result <- apply_spacing_correction_both_sensors(
  vh_data,
  changepoints,
  baseline_overrides_outer = list("1" = 0.8, "3" = 0.6),
  baseline_overrides_inner = list("1" = 1.2)
)
}

\strong{Why Same Segments for Both Sensors:}

Physical probe movement (tree swelling/shrinking) affects both sensor depths
simultaneously, so we use the same segment boundaries but allow different
baselines since the amount of misalignment can vary by depth.
}
\examples{
\dontrun{
# Automatic baseline detection for both sensors
correction <- apply_spacing_correction_both_sensors(
  vh_data = vh_results,
  changepoints = cpt_result$changepoints
)

# Manual baseline override for specific segments/sensors
correction <- apply_spacing_correction_both_sensors(
  vh_data = vh_results,
  changepoints = cpt_result$changepoints,
  baseline_overrides_outer = list("1" = 0.8, "2" = 1.5),
  baseline_overrides_inner = list("1" = 1.2, "2" = 1.8)
)
}

}
\seealso{
Other spacing correction functions: 
\code{\link{apply_manual_spacing_correction}()},
\code{\link{apply_spacing_correction}()},
\code{\link{apply_spacing_correction_per_segment}()},
\code{\link{apply_spacing_correction_workflow}()},
\code{\link{calculate_burgess_coefficients}()},
\code{\link{calculate_zero_offset}()},
\code{\link{get_correction_coefficients}()},
\code{\link{print_spacing_correction_summary}()},
\code{\link{smooth_segment_junctions}()}
}
\concept{spacing correction functions}
