% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04a_method_calibration.R
\name{calibrate_multiple_methods}
\alias{calibrate_multiple_methods}
\title{Calibrate Multiple Secondary Methods to Primary Method}
\usage{
calibrate_multiple_methods(
  vh_corrected,
  primary_method = "HRM",
  secondary_methods,
  sensor_position = "outer",
  threshold_start = 0,
  threshold_max = 20,
  threshold_step = 0.5,
  fit_type = "auto",
  min_points = 50,
  create_plots = TRUE,
  verbose = TRUE,
  manual_thresholds = NULL
)
}
\arguments{
\item{vh_corrected}{Corrected velocity data (after spacing correction).}

\item{primary_method}{Primary method name (default: "HRM").}

\item{secondary_methods}{Character vector of secondary method names to
calibrate (e.g., \code{c("MHR", "Tmax_Klu", "HRMXa")}).}

\item{sensor_position}{Sensor position ("outer" or "inner").}

\item{threshold_start}{Minimum velocity threshold to test (cm/hr) (default: 0).}

\item{threshold_max}{Maximum velocity threshold to test (cm/hr) (default: 20).}

\item{threshold_step}{Increment between thresholds (cm/hr) (default: 0.5).}

\item{fit_type}{Type of fit: "linear", "quadratic", or "auto" (default: "auto").}

\item{min_points}{Minimum points required for calibration (default: 50).}

\item{create_plots}{Logical indicating whether to create diagnostic plots (default: TRUE).}

\item{verbose}{Logical indicating whether to print progress (default: TRUE).}

\item{manual_thresholds}{Optional named list of manual thresholds for specific
methods (e.g., \code{list(MHR = 10.5, Tmax_Klu = 15.0)}). Methods not in
this list will use automatic optimization. Default: NULL (all automatic).}
}
\value{
A named list where each element is a calibration result for one
secondary method. Each element contains:
\itemize{
\item \code{optimal_threshold}: Best threshold for this method
\item \code{optimal_r_squared}: RÂ² at optimal threshold
\item \code{optimal_calibration}: Full calibration object
\item \code{threshold_results}: Data frame of all thresholds tested
\item \code{plots}: Diagnostic plots (if \code{create_plots = TRUE})
}
}
\description{
Wrapper function that calibrates multiple secondary methods to a primary
method in a single call. Each method gets its own optimal threshold and
calibration parameters.
}
\details{
\strong{Practical Usage:}

This function simplifies calibrating multiple methods:

\preformatted{
# Calibrate all methods at once
calibrations <- calibrate_multiple_methods(
  vh_corrected,
  primary_method = "HRM",
  secondary_methods = c("MHR", "Tmax_Klu"),
  sensor_position = "outer"
)

# Access individual results
calibrations$MHR$optimal_threshold        # e.g., 10.5 cm/hr
calibrations$Tmax_Klu$optimal_threshold   # e.g., 15.0 cm/hr (different!)

# View plots
print(calibrations$MHR$plots$r_squared_plot)
}

\strong{Manual Threshold Override:}

You can specify manual thresholds for some methods while letting others
optimise automatically:

\preformatted{
calibrations <- calibrate_multiple_methods(
  vh_corrected,
  primary_method = "HRM",
  secondary_methods = c("MHR", "Tmax_Klu", "HRMXa"),
  sensor_position = "outer",
  manual_thresholds = list(MHR = 8.5)  # MHR manual, others automatic
)
}
}
\examples{
\dontrun{
# Calibrate multiple methods for outer sensors
calibrations_outer <- calibrate_multiple_methods(
  vh_corrected = vh_corrected,
  primary_method = "HRM",
  secondary_methods = c("MHR", "Tmax_Klu"),
  sensor_position = "outer"
)

# Then for inner sensors
calibrations_inner <- calibrate_multiple_methods(
  vh_corrected = vh_corrected,
  primary_method = "HRM",
  secondary_methods = c("MHR", "Tmax_Klu"),
  sensor_position = "inner"
)

# Apply transformations
vh_calibrated <- transform_multiple_methods(vh_corrected, calibrations_outer)
vh_calibrated <- transform_multiple_methods(vh_calibrated, calibrations_inner)
}

}
\seealso{
Other method calibration functions: 
\code{\link{calibrate_method_to_primary}()},
\code{\link{find_optimal_calibration_threshold}()},
\code{\link{transform_multiple_methods}()},
\code{\link{transform_secondary_method}()}
}
\concept{method calibration functions}
