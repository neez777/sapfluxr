% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04d_apply_calibration.R
\name{apply_method_calibration}
\alias{apply_method_calibration}
\title{Apply Method Calibration to Create Unified Dataset}
\usage{
apply_method_calibration(
  vh_corrected,
  thresholds_outer,
  thresholds_inner,
  probe_config = NULL,
  wood_properties = NULL,
  velocity_col = "Vh_cm_hr"
)
}
\arguments{
\item{vh_corrected}{Data frame with corrected velocities (all methods)}

\item{thresholds_outer}{Named list of thresholds for outer sensor (e.g., list(MHR = 15.2, HRMXa = 12.8))}

\item{thresholds_inner}{Named list of thresholds for inner sensor}

\item{probe_config}{Probe configuration (for Peclet number calculation)}

\item{wood_properties}{Wood properties (for Peclet number calculation)}

\item{velocity_col}{Column name containing velocity values (default: "Vh_cm_hr")}
}
\value{
Tibble with calibrated velocities, one row per pulse/sensor:
\itemize{
\item datetime - Timestamp
\item pulse_id - Pulse identifier
\item sensor_position - "outer" or "inner"
\item Vh_calibrated - Calibrated velocity (cm/hr)
\item method_used - Which method was used ("HRM", "MHR", etc.)
\item peclet_number - Recalculated Peclet number
\item quality_flag - Quality assessment
}
}
\description{
Creates a calibrated velocity dataset by applying method-specific thresholds
to switch between HRM and secondary methods. Results in one row per pulse/sensor
with the calibrated velocity and recalculated Peclet number.
}
\details{
For each pulse and sensor position:
\enumerate{
\item Start with HRM velocity
\item Check if HRM >= threshold for any secondary method
\item If yes, use the secondary method with the lowest threshold that HRM exceeds
\item Recalculate Peclet number based on calibrated velocity
}
}
\seealso{
Other calibration functions: 
\code{\link{recalculate_peclet}()}
}
\concept{calibration functions}
