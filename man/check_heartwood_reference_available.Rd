% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/03a_spacing_correction.R
\name{check_heartwood_reference_available}
\alias{check_heartwood_reference_available}
\title{Check if Heartwood Reference Correction is Available}
\usage{
check_heartwood_reference_available(
  probe_config,
  sapwood_depth,
  bark_thickness = 0,
  field_of_influence = 1
)
}
\arguments{
\item{probe_config}{Probe configuration object (ProbeConfig) or named list
containing probe geometry. Must include:
\itemize{
\item \code{length} or \code{probe_length}: Total probe length (mm)
\item \code{inner_sensor}: Distance from probe tip to inner sensor (mm)
}}

\item{sapwood_depth}{Sapwood depth from cambium to heartwood boundary (cm).
This is the depth of conducting sapwood.}

\item{bark_thickness}{Bark thickness (cm). Default is 0 (probe handle at
cambium surface).}

\item{field_of_influence}{Radial extent of heat pulse influence (cm).
Default is 1.0 cm (10mm). The inner sensor must be at least half this
distance beyond the sapwood/heartwood boundary to avoid convective
influence from sap flow.}
}
\value{
A list with class \code{"heartwood_reference_check"} containing:
\item{available}{Logical: TRUE if inner sensor is in heartwood}
\item{inner_depth_cm}{Depth of inner sensor from cambium (cm)}
\item{sapwood_depth_cm}{Provided sapwood depth (cm)}
\item{margin_cm}{Safety margin (how far past sapwood boundary, cm)}
\item{required_margin_cm}{Minimum required margin (field_of_influence/2)}
\item{probe_config_used}{Summary of probe configuration}
\item{recommendation}{Text recommendation for user}
}
\description{
Determines whether the inner temperature sensor is positioned deep enough
in the heartwood to serve as a continuous zero-flow reference. This method
relies on the principle that heartwood conducts no sap, so any heat pulse
velocity measured at the inner sensor should theoretically be zero.
}
\details{
\strong{Scientific Basis:}

Heat pulse velocity methods measure sap flow by tracking heat movement
through the sapwood. In heartwood, there is no water transport, so heat
transfer is purely conductive. If the inner sensor is positioned entirely
in heartwood (beyond the influence of sapwood convection), it provides a
continuous "true zero" reference.

\strong{Geometry Calculation:}

The inner sensor depth from cambium is calculated as:
\deqn{d_{inner} = (L_{probe} - d_{tip}) / 10 - t_{bark}}

Where:
\itemize{
\item \eqn{L_{probe}} = probe length (mm)
\item \eqn{d_{tip}} = inner sensor distance from probe tip (mm)
\item \eqn{t_{bark}} = bark thickness (cm)
}

\strong{Field of Influence:}

The heat pulse field of influence is typically ~10mm radially. To ensure
the inner sensor is not affected by sapwood convection, it should be at
least 5mm (half the field) beyond the sapwood/heartwood boundary.
}
\examples{
\dontrun{
# Check with explicit values
check <- check_heartwood_reference_available(
  probe_config = list(length = 35, inner_sensor = 7.5),
  sapwood_depth = 2.0,  # 2 cm sapwood
  bark_thickness = 0.3   # 3 mm bark
)

if (check$available) {
  cat("Heartwood reference available!\n")
  cat("Inner sensor is", check$margin_cm, "cm into heartwood\n")
}

# Using probe config object
probe_config <- load_probe_config("symmetrical")
check <- check_heartwood_reference_available(
  probe_config = probe_config,
  sapwood_depth = 1.5
)
}

}
\seealso{
Other spacing correction functions: 
\code{\link{apply_heartwood_reference_correction}()},
\code{\link{apply_manual_spacing_correction}()},
\code{\link{apply_spacing_correction}()},
\code{\link{apply_spacing_correction_both_sensors}()},
\code{\link{apply_spacing_correction_per_segment}()},
\code{\link{apply_spacing_correction_workflow}()},
\code{\link{calculate_burgess_coefficients}()},
\code{\link{calculate_zero_offset}()},
\code{\link{get_correction_coefficients}()},
\code{\link{print_spacing_correction_summary}()},
\code{\link{smooth_segment_junctions}()}
}
\concept{spacing correction functions}
