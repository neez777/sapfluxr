% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04c_calibration_workflows.R
\name{apply_early_calibration_sdma}
\alias{apply_early_calibration_sdma}
\title{Apply Early Calibration and sDMA (Before Corrections)}
\usage{
apply_early_calibration_sdma(
  vh_results,
  primary_method = "HRM",
  secondary_methods = c("MHR", "HRMXb"),
  sdma_methods = "MHR",
  sensor_position = "outer",
  manual_thresholds = NULL,
  peclet_threshold = 1
)
}
\arguments{
\item{vh_results}{Raw velocity results from calc_heat_pulse_velocity()}

\item{primary_method}{Character. Primary method for calibration (usually "HRM").
Default: "HRM".}

\item{secondary_methods}{Character vector. Secondary methods to calibrate to
primary. Default: c("MHR", "HRMXb").}

\item{sdma_methods}{Character vector. Subset of secondary_methods to use for
creating sDMA combined methods. Set to NULL to skip sDMA. Default: "MHR".}

\item{sensor_position}{Character. Sensor position for calibration: "outer",
"inner", or "both". Default: "outer".}

\item{manual_thresholds}{Named list of manual thresholds for specific methods.
Default: NULL (automatic threshold detection).}

\item{peclet_threshold}{Numeric. Peclet number threshold for sDMA switching.
Pe < threshold uses HRM, Pe >= threshold uses secondary. Default: 1.0.}
}
\value{
List with components:
\item{calibrations}{Calibration results from calibrate_multiple_methods()}
\item{vh_calibrated}{Velocity data after calibration (no sDMA)}
\item{vh_with_sdma}{Velocity data with calibrated methods + sDMA methods}
\item{timing}{"early"}
}
\description{
Applies method calibration and sDMA immediately after velocity calculation,
before spacing and wound corrections. This is Tim's original approach.
}
\details{
The workflow is:
\enumerate{
\item Calibrate secondary methods to primary (usually HRM)
\item Apply calibration transformations
\item Apply sDMA to create combined methods
\item User then applies corrections to ALL methods (including sDMA)
}

\strong{Advantages of early calibration}:
\itemize{
\item See method relationships in "raw" uncorrected state
\item sDMA based on original Peclet numbers
\item All methods (individual + sDMA) get corrected together
}

\strong{Disadvantages}:
\itemize{
\item Corrections may change method relationships
\item sDMA threshold may not be optimal for corrected data
}

\strong{Next steps}: Apply spacing and wound corrections to vh_with_sdma, which
will correct ALL methods including sDMA variants.
}
\examples{
\dontrun{
# Calculate velocities
vh <- calc_heat_pulse_velocity(hp_data, methods = c("HRM", "MHR", "HRMXb"), wood)

# Early calibration + sDMA
early <- apply_early_calibration_sdma(
  vh,
  secondary_methods = c("MHR", "HRMXb"),
  sdma_methods = "MHR"
)

# Methods: HRM, MHR, HRMXb (calibrated), sDMA:MHR
unique(early$vh_with_sdma$method)

# THEN apply corrections (all methods get corrected)
corrected <- apply_spacing_correction_both_sensors(early$vh_with_sdma, ...)
}

}
\seealso{
Other calibration workflows: 
\code{\link{apply_late_calibration_sdma}()},
\code{\link{compare_calibration_timing}()}
}
\concept{calibration workflows}
