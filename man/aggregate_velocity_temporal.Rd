% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/10_temporal_processing.R
\name{aggregate_velocity_temporal}
\alias{aggregate_velocity_temporal}
\title{Aggregate Velocity Data Temporally}
\usage{
aggregate_velocity_temporal(
  vh_results,
  interval = "hourly",
  agg_method = "mean",
  primary_method = NULL,
  min_observations = 1,
  filter_quality = TRUE,
  quality_flags = c("OK", "good")
)
}
\arguments{
\item{vh_results}{A vh_results object from calc_heat_pulse_velocity() or a data frame
with columns: datetime, method, sensor_position, Vh_cm_hr, quality_flag}

\item{interval}{Character string specifying aggregation interval.
Options: "hourly", "daily", "weekly", "monthly" (default: "hourly")}

\item{agg_method}{Character string specifying aggregation method for velocities.
Options: "mean", "median", "max" (default: "mean")}

\item{primary_method}{Character string specifying which HPV method to use as primary.
If NULL, uses all available methods (default: NULL)}

\item{min_observations}{Integer minimum number of observations required per interval
for valid aggregation (default: 1)}

\item{filter_quality}{Logical whether to filter out poor quality measurements
before aggregation (default: TRUE)}

\item{quality_flags}{Character vector of quality flags to include. Only used if
filter_quality = TRUE (default: c("OK", "good"))}
}
\value{
A data frame with aggregated velocity data containing:
\describe{
\item{datetime}{Aggregation period timestamp (POSIXct)}
\item{method}{HPV calculation method used}
\item{sensor_position}{Sensor position ("outer" or "inner")}
\item{Vh_cm_hr}{Aggregated velocity (cm/hr)}
\item{Vh_sd}{Standard deviation of velocities in interval}
\item{n_observations}{Number of observations in interval}
\item{min_velocity}{Minimum velocity in interval}
\item{max_velocity}{Maximum velocity in interval}
\item{data_coverage}{Proportion of expected observations present (0-1)}
\item{quality_score}{Overall quality score for interval (0-100)}
\item{aggregation_interval}{Aggregation interval used}
\item{aggregation_method}{Aggregation method used}
}
}
\description{
Aggregate heat pulse velocity measurements from pulse-level to specified
time intervals (hourly, daily, etc.) with quality control and gap detection.
}
\details{
This function provides temporal aggregation following scientific best practices
for sap flow data processing. Data coverage is calculated based on expected
measurement frequency (typically 30-minute intervals for ICT sensors).

Quality scores incorporate data coverage, sample size, and measurement variability
to provide an overall assessment of interval reliability.
}
\examples{
\dontrun{
# Basic hourly aggregation
hourly_data <- aggregate_velocity_temporal(vh_results, interval = "hourly")

# Daily aggregation with HRM method only
daily_hrm <- aggregate_velocity_temporal(
  vh_results,
  interval = "daily",
  agg_method = "median",
  primary_method = "HRM",
  min_observations = 10
)
}

}
\seealso{
\code{\link{calc_heat_pulse_velocity}}, \code{\link{filter_velocity_results}}
}
