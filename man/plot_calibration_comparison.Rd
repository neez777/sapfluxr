% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04k_calibration_plots.R
\name{plot_calibration_comparison}
\alias{plot_calibration_comparison}
\title{Plot Calibration Comparison Time Series}
\usage{
plot_calibration_comparison(
  vh_original,
  vh_calibrated,
  calibration,
  method = NULL,
  start_date = NULL,
  end_date = NULL,
  aggregation = "none"
)
}
\arguments{
\item{vh_original}{Original velocity data (before calibration transformation).}

\item{vh_calibrated}{Calibrated velocity data (after transformation).}

\item{calibration}{Calibration object from \code{\link{calibrate_method_to_primary}},
OR a multi-method calibration object from \code{\link{calibrate_multiple_methods}}.
If multi-method and \code{method} not specified, prompts user interactively.}

\item{method}{Character string specifying which secondary method to plot when
\code{calibration} is a multi-method calibration object. If NULL and
interactive, prompts user to select. Ignored if \code{calibration} is a
single calibration object. Default: NULL.}

\item{start_date}{Start date/datetime (POSIXct, character "YYYY-MM-DD", or
numeric day number). If NULL and interactive, prompts user. Default: NULL.}

\item{end_date}{End date/datetime (POSIXct, character "YYYY-MM-DD", numeric
day number, or number of days to plot from start). If NULL and interactive,
prompts user. Default: NULL.}

\item{aggregation}{Optional aggregation period for clearer visualisation:
"hourly", "daily", or "none" (default: "none").}
}
\value{
A ggplot2 plot object showing:
\itemize{
\item Primary method (solid line, steelblue colour)
\item Original secondary method (dashed line, coral colour)
\item Calibrated secondary method (solid line, coral colour)
}
}
\description{
Creates a time series plot showing the effect of method calibration by
comparing original secondary method values, calibrated secondary method
values, and primary method values. Provides interactive prompts for date
selection if not specified.
}
\details{
\strong{Plot Interpretation:}

This plot helps assess the calibration transformation:
\itemize{
\item \strong{Good calibration}: Calibrated secondary aligns closely with primary
\item \strong{Original vs calibrated}: Shows magnitude of transformation
\item \strong{Temporal patterns}: Verifies waveform similarity between methods
}

\strong{Interactive Date Selection:}

When run in an interactive session without specifying dates, the function
prompts for:
\itemize{
\item Start date (YYYY-MM-DD format or day number, press Enter for data start)
\item End date (YYYY-MM-DD format or number of days to plot, press Enter for data end)
}

\strong{Aggregation:}

For long time series, use aggregation to reduce overplotting:
\itemize{
\item \code{"hourly"}: Mean per hour
\item \code{"daily"}: Mean per day
\item \code{"none"}: All data points (may be slow for large datasets)
}
}
\examples{
\dontrun{
# === SINGLE METHOD CALIBRATION ===

# Transform method
calibration <- calibrate_method_to_primary(
  vh_corrected,
  primary_method = "HRM",
  secondary_method = "MHR",
  sensor_position = "outer",
  threshold_velocity = 10
)
vh_calibrated <- transform_secondary_method(vh_corrected, calibration)

# Interactive mode - prompts for dates
plot_calibration_comparison(
  vh_original = vh_corrected,
  vh_calibrated = vh_calibrated,
  calibration = calibration
)

# === MULTI-METHOD CALIBRATION ===

# Calibrate multiple methods
calibrations <- calibrate_multiple_methods(
  vh_corrected,
  primary_method = "HRM",
  secondary_methods = c("MHR", "Tmax_Klu", "HRMXa"),
  sensor_position = "outer"
)
vh_calibrated <- transform_multiple_methods(vh_corrected, calibrations)

# Interactive: Prompts to select which method to plot
plot_calibration_comparison(
  vh_original = vh_corrected,
  vh_calibrated = vh_calibrated,
  calibration = calibrations  # Will prompt: "Enter method number to plot [1-3]:"
)

# Non-interactive: Specify method explicitly
plot_calibration_comparison(
  vh_original = vh_corrected,
  vh_calibrated = vh_calibrated,
  calibration = calibrations,
  method = "MHR"  # Plot MHR calibration
)

# Specify dates explicitly
plot_calibration_comparison(
  vh_original = vh_corrected,
  vh_calibrated = vh_calibrated,
  calibration = calibrations,
  method = "Tmax_Klu",
  start_date = "2024-01-01",
  end_date = "2024-01-31",
  aggregation = "daily"
)

# Use day numbers and relative days
plot_calibration_comparison(
  vh_original = vh_corrected,
  vh_calibrated = vh_calibrated,
  calibration = calibrations,
  method = "HRMXa",
  start_date = 1,    # Day 1
  end_date = 30      # 30 days from start
)
}

}
\concept{calibration plotting functions}
