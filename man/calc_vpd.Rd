% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/01i_weather_data.R
\name{calc_vpd}
\alias{calc_vpd}
\title{Calculate vapor pressure deficit (VPD)}
\usage{
calc_vpd(
  weather_data,
  temp_col = "air_temp_c",
  rh_col = "relative_humidity",
  magnus_coef = 17.27,
  magnus_base_temp = 237.7,
  return_components = FALSE
)
}
\arguments{
\item{weather_data}{A weather_data object from \code{read_weather_data()}, or
a data frame with columns \code{air_temp_c} and \code{relative_humidity}.}

\item{temp_col}{Character string. Name of temperature column if not using
weather_data object. Default is "air_temp_c".}

\item{rh_col}{Character string. Name of relative humidity column if not using
weather_data object. Default is "relative_humidity".}

\item{magnus_coef}{Numeric. Magnus equation coefficient (dimensionless).
Default is 17.27 (Alduchov & Eskridge 1996).}

\item{magnus_base_temp}{Numeric. Magnus equation base temperature (°C).
Default is 237.7°C (Alduchov & Eskridge 1996).}

\item{return_components}{Logical. If TRUE, returns saturated vapor pressure
and actual vapor pressure in addition to VPD. Default is FALSE.}
}
\value{
If \code{return_components = FALSE}, returns the input data frame with
an additional column \code{vpd_kpa} (vapor pressure deficit in kPa).
If \code{return_components = TRUE}, also adds columns \code{svp_kpa}
(saturated vapor pressure) and \code{avp_kpa} (actual vapor pressure).
}
\description{
Calculates vapor pressure deficit from air temperature and relative humidity
using the Magnus equation. VPD is the difference between the amount of moisture
in the air and how much moisture the air can hold when saturated.
}
\details{
The Magnus-Tetens equation calculates saturated vapor pressure (SVP) as:
\deqn{SVP = e_0 \times \exp\left(\frac{\alpha \times T}{\beta + T}\right)}

Where:
\itemize{
\item \eqn{e_0} = 0.61078 kPa (reference saturation vapor pressure at 0°C)
\item \eqn{T} = air temperature (°C)
\item \eqn{\alpha} = 17.27 (dimensionless coefficient, \code{magnus_coef})
\item \eqn{\beta} = 237.7°C (base temperature, \code{magnus_base_temp})
}

Actual vapor pressure (AVP) is calculated from relative humidity:
\deqn{AVP = \frac{RH}{100} \times SVP}

Vapor pressure deficit is then:
\deqn{VPD = SVP - AVP}

Default parameters (α=17.27, β=237.7) are appropriate for temperatures
between 0-60°C. For sub-zero temperatures, consider adjusting parameters.
}
\examples{
\dontrun{
# Using weather_data object
weather <- read_weather_data("weather_station.csv")
weather_vpd <- calc_vpd(weather)

# Using custom data frame
my_data <- data.frame(
  temp = c(20, 25, 30),
  rh = c(50, 60, 70)
)
my_data_vpd <- calc_vpd(my_data, temp_col = "temp", rh_col = "rh")

# Return all components
weather_full <- calc_vpd(weather, return_components = TRUE)

# Custom Magnus parameters (for sub-zero temperatures)
weather_vpd <- calc_vpd(weather, magnus_coef = 17.5, magnus_base_temp = 240.0)
}

}
\references{
Alduchov, O. A., & Eskridge, R. E. (1996). Improved Magnus form approximation
of saturation vapor pressure. Journal of Applied Meteorology, 35(4), 601-609.
}
\seealso{
Other weather data functions: 
\code{\link{read_weather_data}()}
}
\concept{weather data functions}
