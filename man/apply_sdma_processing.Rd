% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/04b_sdma_methods.R
\name{apply_sdma_processing}
\alias{apply_sdma_processing}
\title{Apply Selectable Dual Method Approach (sDMA) Processing}
\usage{
apply_sdma_processing(
  vh_results,
  secondary_method,
  skip_low_peclet = NULL,
  show_progress = TRUE
)
}
\arguments{
\item{vh_results}{Results tibble from calc_heat_pulse_velocity() containing HRM
and at least one secondary method. \strong{FUTURE:} Will accept corrected velocities
(Vc) after spacing and wound corrections.}

\item{secondary_method}{Character string or vector specifying secondary method(s).
Options: "MHR", "Tmax_Coh", "Tmax_Klu", "HRMXa", "HRMXb".
Can provide multiple methods to create multiple sDMA variants.}

\item{skip_low_peclet}{Logical indicating whether to automatically skip sDMA when
all Peclet numbers are <= 1. If NULL (default), will prompt user interactively.
Set to TRUE to skip without prompting, FALSE to always calculate.}

\item{show_progress}{Logical indicating whether to show progress bar. Default: TRUE}
}
\value{
A vh_results tibble with additional rows for sDMA method(s).
Each sDMA method is labeled as "sDMA:SecondaryMethod" (e.g., "sDMA:MHR").
The selected_method column shows which method was actually used for each measurement.
}
\description{
\strong{FUTURE FUNCTIONALITY} - Currently parked for later workflow implementation.
}
\details{
Applies method switching based on Peclet number to create sDMA results.
Switches between HRM (Pe < 1.0) and a user-specified secondary method (Pe >= 1.0).
HRM results must already be calculated with Peclet numbers.

This function requires:
\itemize{
\item HRM results with Peclet numbers (from calc_heat_pulse_velocity with methods including "HRM")
\item At least one secondary method already calculated
}

The switching logic is:
\itemize{
\item Pe < 1.0: Use HRM (low flows, HRM is accurate)
\item Pe >= 1.0: Use secondary method (high flows, secondary method more appropriate)
}

\strong{FUTURE WORKFLOW POSITION:}
This will be applied AFTER wound correction and BEFORE flux density calculation:
\enumerate{
\item Calculate raw HPV (all methods)
\item Apply spacing correction
\item Apply wound correction → Vc (corrected velocities)
\item \strong{Apply sDMA method selection} ← THIS FUNCTION
\item Calculate flux density
\item Calculate tree water use
}
}
\examples{
\dontrun{
# FUTURE EXAMPLE (not yet implemented in workflow):

# Calculate base methods
heat_pulse_data <- read_heat_pulse_data("data.txt")
vh <- calc_heat_pulse_velocity(heat_pulse_data,
                                methods = c("HRM", "MHR", "Tmax_Klu"))

# Apply corrections (spacing + wound)
vh_corrected <- apply_spacing_correction(vh, ...)
vh_corrected <- apply_wound_correction(vh_corrected, ...)  # NOT YET IMPLEMENTED

# THEN apply sDMA to corrected velocities
vh_sdma <- apply_sdma_processing(vh_corrected, secondary_method = "MHR")

# Continue to flux density calculations
flux <- calc_sap_flux_density(vh_sdma, ...)  # NOT YET IMPLEMENTED
}

}
\keyword{internal}
